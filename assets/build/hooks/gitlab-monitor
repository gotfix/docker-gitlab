#!/bin/bash
set -e

# Patch gitlab-monitor to use redis gem >= 3.3.3 to be compatible with ruby 2.4
gitlab_ce_update_redis_gem_to_latest() {
  echo "Updating redis gem to the latest allowed"
  exec_as_git bundle update redis
}

# Function that is executed before build process starts
prebuild_gitlab_monitor() {
  gitlab_ce_update_redis_gem_to_latest
  return 0
}

# Function that is executed after build process is done
postbuild_gitlab_monitor() {
  return 0
}

